(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{1097:function(a,n,s){"use strict";s.r(n);var t=s(1),e=Object(t.a)({},(function(){var a=this,n=a.$createElement,t=a._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("参考视频："),t("a",{attrs:{href:"https://www.bilibili.com/video/BV16J411h7Rd/?p=116&spm_id_from=pageDriver&vd_source=a8c98c296c32f29367168e837367f0d1",target:"_blank",rel:"noopener noreferrer"}},[a._v("04.067-活跃性-定位死锁_哔哩哔哩_bilibili"),t("OutboundLink")],1)]),a._v(" "),t("ul",[t("li",[a._v("检测死锁可以使用 "),t("code",[a._v("jconsole")]),a._v("工具，或者使用 "),t("code",[a._v("jps")]),a._v(" 定位"),t("strong",[a._v("进程 id")]),a._v("，再用 "),t("code",[a._v("jstack")]),a._v("定位死锁：")])]),a._v(" "),t("p",[a._v("使用"),t("code",[a._v("jps")]),a._v("定位进程id")]),a._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cmd >jps\n2064 RemoteMavenServer36\n20020 BmfwBootApplication\n17480 Jps\n17944 \n16540 Launcher\n18220 Test  <------- 当前死锁的进程\n18332 RemoteMavenServer36\n4620 Launcher\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br")])]),t("p",[a._v("使用 "),t("code",[a._v("jstack 进程id")]),a._v(" 定位死锁信息")]),a._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('"t2" #13 prio=5 os_prio=0 tid=0x0000000029066000 nid=0x2e30 waiting for monitor entry [0x000000002971f000]\n   java.lang.Thread.State: BLOCKED (on object monitor)\n        at com.Test.lambda$main$1(Test.java:35)\n        - waiting to lock <0x0000000716b7bda8> (a java.lang.Object)\n        - locked <0x0000000716b7bdb8> (a java.lang.Object)\n        at com.Test$$Lambda$2/1879034789.run(Unknown Source)\n        at java.lang.Thread.run(Thread.java:748)\n\n"t1" #12 prio=5 os_prio=0 tid=0x0000000029065800 nid=0x1a20 waiting for monitor entry [0x000000002961f000]\n   java.lang.Thread.State: BLOCKED (on object monitor)\n        at com.Test.lambda$main$0(Test.java:25)\n        - waiting to lock <0x0000000716b7bdb8> (a java.lang.Object)\n        - locked <0x0000000716b7bda8> (a java.lang.Object)\n        at com.Test$$Lambda$1/942986815.run(Unknown Source)\n        at java.lang.Thread.run(Thread.java:748)\n\nFound one Java-level deadlock:\n=============================\n"t2":\n  waiting to lock monitor 0x0000000025f31238 (object 0x0000000716b7bda8, a java.lang.Object),\n  which is held by "t1"\n"t1":\n  waiting to lock monitor 0x0000000025f33338 (object 0x0000000716b7bdb8, a java.lang.Object),\n  which is held by "t2"\n\nJava stack information for the threads listed above:\n===================================================\n"t2":\n"t1":\n        at com.Test.lambda$main$0(Test.java:25)\n        - waiting to lock <0x0000000716b7bdb8> (a java.lang.Object)\n        - locked <0x0000000716b7bda8> (a java.lang.Object)\n        at com.Test$$Lambda$1/942986815.run(Unknown Source)\n        at java.lang.Thread.run(Thread.java:748)\n\nFound 1 deadlock.\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br"),t("span",{staticClass:"line-number"},[a._v("25")]),t("br"),t("span",{staticClass:"line-number"},[a._v("26")]),t("br"),t("span",{staticClass:"line-number"},[a._v("27")]),t("br"),t("span",{staticClass:"line-number"},[a._v("28")]),t("br"),t("span",{staticClass:"line-number"},[a._v("29")]),t("br"),t("span",{staticClass:"line-number"},[a._v("30")]),t("br"),t("span",{staticClass:"line-number"},[a._v("31")]),t("br"),t("span",{staticClass:"line-number"},[a._v("32")]),t("br"),t("span",{staticClass:"line-number"},[a._v("33")]),t("br"),t("span",{staticClass:"line-number"},[a._v("34")]),t("br"),t("span",{staticClass:"line-number"},[a._v("35")]),t("br"),t("span",{staticClass:"line-number"},[a._v("36")]),t("br")])]),t("img",{attrs:{src:s(554)}}),a._v(" "),t("ul",[t("li",[t("p",[a._v("避免死锁要注意加锁顺序")])]),a._v(" "),t("li",[t("p",[a._v("另外如果由于某个线程进入了死循环，导致其它线程一直等待，对于这种情况 linux 下可以通过 top 先定位到 CPU 占用高的 Java 进程，再利用 "),t("code",[a._v("top -Hp 进程id")]),a._v("来定位是哪个线程，最后再用 "),t("code",[a._v("jstack")]),a._v("排查")])])]),a._v(" "),t("img",{attrs:{src:s(555)}})])}),[],!1,null,null,null);n.default=e.exports},554:function(a,n,s){a.exports=s.p+"assets/img/38.3b38b868.png"},555:function(a,n,s){a.exports=s.p+"assets/img/39.8db1dfdf.jpg"}}]);