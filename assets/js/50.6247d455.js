(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1092:function(_,t,r){"use strict";r.r(t);var v=r(1),n=Object(v.a)({},(function(){var _=this,t=_.$createElement,v=_._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("p",[_._v("每个线程都有自己的一个 Parker 对象，由三部分组成 _counter ， _cond 和 _mutex 打个比喻")]),_._v(" "),v("ul",[v("li",[v("p",[_._v("线程就像一个旅人，Parker 就像他随身携带的背包，条件变量就好比背包中的帐篷。_counter 就好比背包中 的备用干粮（0 为耗尽，1 为充足）")])]),_._v(" "),v("li",[v("p",[_._v("调用 park 就是要看需不需要停下来歇息")]),_._v(" "),v("p",[_._v("​\t如果备用干粮耗尽，那么钻进帐篷歇息")]),_._v(" "),v("p",[_._v("​\t如果备用干粮充足，那么不需停留，继续前进")])]),_._v(" "),v("li",[v("p",[_._v("调用 unpark，就好比令干粮充足")]),_._v(" "),v("p",[_._v("​\t如果这时线程还在帐篷，就唤醒让他继续前进")]),_._v(" "),v("p",[_._v("​\t如果这时线程还在运行，那么下次他调用 park 时，仅是消耗掉备用干粮，不需停留继续前进")]),_._v(" "),v("p",[_._v("​\t\t\t因为背包空间有限，多次调用 unpark 仅会补充一份备用干粮")])])]),_._v(" "),v("img",{attrs:{src:r(550)}}),_._v(" "),v("p",[_._v("1 当前线程调用 Unsafe.park() 方法")]),_._v(" "),v("p",[_._v("2 检查 _counter ，本情况为 0，这时，获得 _mutex 互斥锁")]),_._v(" "),v("p",[_._v("3 线程进入 _cond 条件变量阻塞")]),_._v(" "),v("p",[_._v("4 设置 _counter = 0")]),_._v(" "),v("img",{attrs:{src:r(551)}}),_._v(" "),v("p",[_._v("1 调用 Unsafe.unpark(Thread_0) 方法，设置 _counter 为 1")]),_._v(" "),v("p",[_._v("2 唤醒 _cond 条件变量中的 Thread_0")]),_._v(" "),v("p",[_._v("3 Thread_0 恢复运行")]),_._v(" "),v("p",[_._v("4 设置 _counter 为 0")]),_._v(" "),v("img",{attrs:{src:r(552)}}),_._v(" "),v("p",[_._v("1 调用 Unsafe.unpark(Thread_0) 方法，设置 _counter 为 1")]),_._v(" "),v("p",[_._v("2 当前线程调用 Unsafe.park() 方法")]),_._v(" "),v("p",[_._v("3 检查 _counter ，本情况为 1，这时线程无需阻塞，继续运行")]),_._v(" "),v("p",[_._v("4 设置 _counter 为 0")])])}),[],!1,null,null,null);t.default=n.exports},550:function(_,t,r){_.exports=r.p+"assets/img/34.95d55b46.png"},551:function(_,t,r){_.exports=r.p+"assets/img/35.93df67fc.png"},552:function(_,t,r){_.exports=r.p+"assets/img/36.7bae9834.png"}}]);