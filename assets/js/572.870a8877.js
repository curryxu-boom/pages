(window.webpackJsonp=window.webpackJsonp||[]).push([[572],{1427:function(a,s,n){"use strict";n.r(s);var t=n(1),e=Object(t.a)({},(function(){var a=this,s=a.$createElement,n=a._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h1",{attrs:{id:"dockerfile的使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile的使用"}},[a._v("#")]),a._v(" dockerfile的使用")]),a._v(" "),n("p",[a._v("前面的都是小试牛刀  这个才是最重要的")]),a._v(" "),n("p",[a._v("制作镜像 ："),n("code",[a._v("docker commit")]),a._v(" 这个命令")]),a._v(" "),n("p",[a._v("但是一般在做项目部署或者 服务的部署的时候 我们都会使用 "),n("code",[a._v("Dockerfile")]),a._v(" 这个文件来进行构建")]),a._v(" "),n("p",[n("code",[a._v("Dockerfile")]),a._v("是编写一个文件  使用这个文件来 构建我们的镜像")]),a._v(" "),n("h2",{attrs:{id:"构建一个自己的镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#构建一个自己的镜像"}},[a._v("#")]),a._v(" 构建一个自己的镜像")]),a._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[a._v("from centos:7      ：这个表示的是从那个基础的镜像进行构建\nmaintainer xiaobobo ：这个表示的是 构建这个镜像的作者\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" jdk-7u79-linux-x64.tar.gz /usr/local   // add：表示的是 将这个文件上传到指定的路径 并且进行解压\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" linux_apache-tomcat-7.0.26.tar.gz /usr/local\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("env")]),a._v(" JAVA_HOME /usr/local/jdk1.7.0_79   //这个表示的是设置Java的环境变量\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("env")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$JAVA_HOME")]),a._v("/bin:"),n("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),a._v("   \nexpose "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v("    //这个表示的是对外暴露的端口\ncmd "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/usr/local/apache-tomcat-7.0.26/bin/catalina.sh"')]),a._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"run"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  //这个表示的是启动文件所在的路径  以及启动的命令\n\n注意：1、这个Dockerfile文件的名字是不能乱写的\n构建镜像的命令\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" build "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" 镜像的名字：镜像的版本号  ."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("这个.表示的是在当前的这个路劲下去找 Dockerfile这个文件"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n启动这个镜像的命令\n     "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v(":8080 xiaobobotomcat:v1.0\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br")])]),n("h2",{attrs:{id:"构建不解压的文件的镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#构建不解压的文件的镜像"}},[a._v("#")]),a._v(" 构建不解压的文件的镜像")]),a._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[a._v("from centos:7\nmaintainer xiaobobo\ncopy jdk-7u79-linux-x64.tar.gz /usr/local\ncopy linux_apache-tomcat-7.0.26.tar.gz /usr/local\ncopy xxx-springcloud-aaa.war /usr/local\nrun "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /usr/local "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxvf")]),a._v(" jdk-7u79-linux-x64.tar.gz "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /usr/local "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxvf")]),a._v(" linux_apache-tomcat-7.0.26.tar.gz "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /usr/local "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" xxx-springcloud-aaa.war /usr/local/apache-tomcat-7.0.26/webapps\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("env")]),a._v(" JAVA_HOME /usr/local/jdk1.7.0_79\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("env")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$JAVA_HOME")]),a._v("/bin:"),n("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),a._v("\nexpose "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v("\ncmd "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/usr/local/apache-tomcat-7.0.26/bin/catalina.sh"')]),a._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"run"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br")])]),n("p",[a._v("要向同时部署  多个服务  这个一个"),n("code",[a._v("Dockerfile")]),a._v("文件显然不能满足咋们的要求  这个时候 "),n("code",[a._v("docker-compose")]),a._v("就该上场了")])])}),[],!1,null,null,null);s.default=e.exports}}]);