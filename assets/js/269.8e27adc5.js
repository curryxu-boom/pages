(window.webpackJsonp=window.webpackJsonp||[]).push([[269],{1028:function(s,n,a){"use strict";a.r(n);var e=a(1),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"cardListContainer"},[a("div",{staticClass:"card-list"},[a("a",{staticClass:"card-item row-3",staticStyle:{"background-color":"#718971","--randomColor":"#718971",color:"#fff"},attrs:{href:"/pages/img/java/jvm/word/jvm.docx",target:"_blank"}},[a("img",{staticClass:"no-zoom",attrs:{src:"/pages/img/java/jvm/logo.png"}}),s._v(" "),a("div",[a("p",{staticClass:"name"},[s._v("jvm指令集")]),s._v(" "),a("p",{staticClass:"desc"},[s._v("jvm指令集")])])])]),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" jvm指令集\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("desc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'jvm指令集'")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("avatar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /img/java/jvm/logo.png\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("link")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /img/java/jvm/word/jvm.docx\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("bgColor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#718971'")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("textColor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#fff'")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("JVM调优主要就是调整下面两个指标\n停顿时间:  垃圾收集器做垃圾回收中断应用执行的时间。  -XX:MaxGCPauseMillis\n吞吐量：垃圾收集的时间和总时间的占比：1/(1+n)，吞吐量为1-1/(1+n)  -XX:GCTimeRatio=n\n \n\nGC调优步骤\n 打印GC日志\n-XX:+PrintGCDetails  -XX:+PrintGCTimeStamps  -XX:+PrintGCDateStamps  \n-Xloggc:./gc.log\nTomcat则直接加在JAVA_OPTS变量里\n 分析日志得到关键性能指标\n 分析GC原因，调优 JVM 参数\n \n1、Parallel Scavenge 收集器(默认)\n分析 parallel-gc.log\n调优：\n第一次调优，设置Metaspace大小：增大元空间大小 -XX:MetaspaceSize=64M  \n-XX:MaxMetaspaceSize=64M\n第二次调优，增大年轻代动态扩容增量，默认是20(%)，可以减少young gc：\n-XX:YoungGenerationSizeIncrement=30\n比较下几次调优效果：\n吞吐量             最大停顿  平均停顿 Young gc Full gc\n98.356%     120 ms   19 ms 19 2\n 99.252%     20 ms    10 ms 16 0\n \n99.24% 17\n \n \n2、配置CMS收集器\n -XX:+UseConcMarkSweepGC\n分析cms-gc.log\n \n3、配置G1收集器\n-XX:+UseG1GC\n\n分析g1-gc.log\nyoung GC：[GC pause (G1 Evacuation Pause) (young)\ninitial-mark：[GC pause (Metadata GC Threshold) (young) (initial-mark)   (参数：InitiatingHeapOccupancyPercent)\nmixed GC：[GC pause (G1 Evacuation Pause) (mixed) （参数：G1HeapWastePercent）\nfull GC：[Full GC (Allocation Failure) (无可用region)\n（G1内部，前面提到的混合GC是非常重要的释放内存机制，它避免了G1出现Region没有可用的情况，否则就会触发Full GC事件。\nCMS、Parallel、Serial GC都需要通过Full GC去压缩老年代并在这个过程中扫描整个老年代。G1的Full GC算法和Serial GC收集器完全一致。当一个Full GC发生时，整个Java堆执行一个完整的压缩，这样确保了最大的空余内存可用。G1的Full GC是一个单线程，它可能引起一个长时间的停顿时间，G1的设计目标是减少Full GC，满足应用性能目标。）\n \n查看发生MixedGC的阈值：jinfo -flag InitiatingHeapOccupancyPercent 进程id\n \n调优：\n第一次调优，设置Metaspace大小：增大元空间大小-XX:MetaspaceSize=64M  \n-XX:MaxMetaspaceSize=64M\n第二次调优，添加吞吐量和停顿时间参数：-XX:GCTimeRatio=80  -XX:MaxGCPauseMillis=100   \n \n \n分析工具：gceasy，GCViewer \n \n \nG1调优相关\n 常用参数\n -XX:+UseG1GC 开启G1\n -XX:G1HeapRegionSize=n, region的大小，1-32M，2048个\n -XX:MaxGCPauseMillis=200 最大停顿时间\n -XX:G1NewSizePercent   -XX:G1MaxNewSizePercent\n -XX:G1ReservePercent=10 保留防止to space溢出（）\n -XX:ParallelGCThreads=n  SWT线程数（停止应用程序）\n -XX:ConcGCThreads=n  并发线程数=1/4*并行\n 最佳实践\n 年轻代大小：避免使用-Xmn、-XX:NewRatio等显示设置Young区大小，会覆盖暂停时间目标（常用参数3）\n 暂停时间目标：暂停时间不要太严苛，其吞吐量目标是90%的应用程序时间和10%的垃圾回收时间，太严苛会直接影响到吞吐量\n 是否需要切换到G1\n 50%以上的堆被存活对象占用\n 对象分配和晋升的速度变化非常大\n 垃圾回收时间特别长，超过1秒\n G1调优目标\n 6GB以上内存\n 停顿时间是500ms以内\n 吞吐量是90%以上\n \nGC常用参数\n堆栈设置\n  -Xss:每个线程的栈大小\n  -Xms:初始堆大小，默认物理内存的1/64\n  -Xmx:最大堆大小，默认物理内存的1/4\n  -Xmn:新生代大小\n  -XX:NewSize:设置新生代初始大小\n  -XX:NewRatio:默认2表示新生代占年老代的1/2，占整个堆内存的1/3。\n  -XX:SurvivorRatio:默认8表示一个survivor区占用1/8的Eden内存，即1/10的新生代内存。\n -XX:MetaspaceSize:设置元空间大小\n  -XX:MaxMetaspaceSize:设置元空间最大允许大小，默认不受限制，JVM Metaspace会进行动态扩展。\n垃圾回收统计信息\n  -XX:+PrintGC\n  -XX:+PrintGCDetails\n  -XX:+PrintGCTimeStamps\n  -Xloggc:filename\n收集器设置\n  -XX:+UseSerialGC:设置串行收集器\n  -XX:+UseParallelGC:设置并行收集器\n  -XX:+UseParallelOldGC:老年代使用并行回收收集器\n  -XX:+UseParNewGC:在新生代使用并行收集器\n  -XX:+UseParalledlOldGC:设置并行老年代收集器\n  -XX:+UseConcMarkSweepGC:设置CMS并发收集器\n  -XX:+UseG1GC:设置G1收集器\n  -XX:ParallelGCThreads:设置用于垃圾回收的线程数\n并行收集器设置\n  -XX:ParallelGCThreads:设置并行收集器收集时使用的CPU数。并行收集线程数。\n  -XX:MaxGCPauseMillis:设置并行收集最大暂停时间\n  -XX:GCTimeRatio:设置垃圾回收时间占程序运行时间的百分比。公式为1/(1+n)\n  -XX:YoungGenerationSizeIncrement：年轻代gc后扩容比例，默认是20(%)\nCMS收集器设置\n  -XX:+UseConcMarkSweepGC:设置CMS并发收集器\n  -XX:+CMSIncrementalMode:设置为增量模式。适用于单CPU情况。\n  -XX:ParallelGCThreads:设置并发收集器新生代收集方式为并行收集时，使用的CPU数。并行收集线程数。\n  -XX:CMSFullGCsBeforeCompaction:设定进行多少次CMS垃圾回收后，进行一次内存压缩\n  -XX:+CMSClassUnloadingEnabled:允许对类元数据进行回收\n  -XX:UseCMSInitiatingOccupancyOnly:表示只在到达阀值的时候，才进行CMS回收\n  -XX:+CMSIncrementalMode:设置为增量模式。适用于单CPU情况\n  -XX:ParallelCMSThreads:设定CMS的线程数量\n  -XX:CMSInitiatingOccupancyFraction:设置CMS收集器在老年代空间被使用多少后触发\n  -XX:+UseCMSCompactAtFullCollection:设置CMS收集器在完成垃圾收集后是否要进行一次内存碎片的整理\nG1收集器设置\n  -XX:+UseG1GC:使用G1收集器\n  -XX:ParallelGCThreads:指定GC工作的线程数量\n  -XX:G1HeapRegionSize:指定分区大小(1MB~32MB，且必须是2的幂)，默认将整堆划分为2048个分区\n  -XX:GCTimeRatio:吞吐量大小，0-100的整数(默认9)，值为n则系统将花费不超过1/(1+n)的时间用于垃圾收集\n  -XX:MaxGCPauseMillis:目标暂停时间(默认200ms)\n  -XX:G1NewSizePercent:新生代内存初始空间(默认整堆5%)\n  -XX:G1MaxNewSizePercent:新生代内存最大空间\n  -XX:TargetSurvivorRatio:Survivor填充容量(默认50%)\n  -XX:MaxTenuringThreshold:最大任期阈值(默认15)\n  -XX:InitiatingHeapOccupancyPercen:老年代占用空间超过整堆比IHOP阈值(默认45%),超过则执行混合收集\n  -XX:G1HeapWastePercent:堆废物百分比(默认5%)\n  -XX:G1MixedGCCountTarget:参数混合周期的最大总次数(默认8)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);